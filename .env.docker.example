# GTEx-Link Docker NPM Deployment Configuration
# ==============================================
# INSTRUCTIONS:
# 1. Copy this file to '.env.docker' in the same directory: `cp .env.docker.example .env.docker`
# 2. Edit '.env.docker' with your specific settings, especially domain configuration.
# 3. This file will be used by `docker-compose.npm.yml` when you run GTEx-Link with NPM.

# --- Docker Network Configuration ---
# Name of the Docker network that Nginx Proxy Manager (NPM) uses
# Should match the network used by other NPM services (e.g., phentrieve if running)
# Verify with 'docker network ls' on your server if unsure
# Common values: npm_default, nginx-proxy-manager_default, or custom network name
NPM_SHARED_NETWORK_NAME=npm_default

# --- Public URLs (Replace with your actual domain) ---
# These are the URLs that will be configured in Nginx Proxy Manager
# Update these to match your actual domain configuration

# Main API URL for external access through NPM
GTEX_API_URL_PUBLIC=https://gtex-link.example.com

# API base path (usually /api)
GTEX_API_BASE_PATH=/api

# MCP endpoint URL for external access
GTEX_MCP_URL_PUBLIC=https://gtex-link.example.com/mcp

# --- Application Settings ---
# Logging level for the GTEx-Link API service
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL_API=INFO

# GTEx Portal API rate limiting (requests per second)
# Recommended: 5.0 to respect GTEx Portal API limits
GTEX_API_RATE_LIMIT=5.0

# Cache configuration
# Number of items to cache in memory
GTEX_CACHE_SIZE=1000

# Cache TTL in seconds (3600 = 1 hour)
GTEX_CACHE_TTL=3600

# --- Container Resource Limits (Optional) ---
# Memory limit for the API container (e.g., 1g, 512m, 2g)
GTEX_API_MEMORY_LIMIT=512m

# CPU limit for the API container (e.g., 0.5, 1.0, 2.0)
GTEX_API_CPU_LIMIT=0.5

# Memory limit for the MCP container (e.g., 1g, 512m, 2g)
GTEX_MCP_MEMORY_LIMIT=512m

# CPU limit for the MCP container (e.g., 0.5, 1.0, 2.0)
GTEX_MCP_CPU_LIMIT=0.5

# --- Development Settings (Optional - for local development only) ---
# Port for direct API access during development (NOT used in NPM production)
# Set to avoid conflicts with other services (phentrieve uses 8001)
API_PORT_HOST=8002

# --- Advanced Configuration (Optional) ---
# CORS origins for API access (production should be restrictive)
# For production, this is set automatically to your domain
# GTEX_LINK_CORS_ORIGINS=["https://gtex-link.genefoundry.org"]

# Enable CORS credentials (usually true for authenticated requests)
# GTEX_LINK_CORS_ALLOW_CREDENTIALS=true

# Custom MCP path (default: /mcp)
# GTEX_LINK_MCP_PATH=/mcp

# Transport mode (should be 'http' for NPM deployment)
# GTEX_LINK_TRANSPORT_MODE=http

# --- Example Configuration ---
# Uncomment and modify these lines for your setup:
#
# For your actual domain (replace example.com):
# GTEX_API_URL_PUBLIC=https://gtex-link.mydomain.com
# GTEX_MCP_URL_PUBLIC=https://gtex-link.mydomain.com/mcp
#
# For custom NPM network:
# NPM_SHARED_NETWORK_NAME=my_custom_npm_network
#
# For higher performance server:
# GTEX_API_MEMORY_LIMIT=2g
# GTEX_API_CPU_LIMIT=2.0
# GTEX_CACHE_SIZE=2000
